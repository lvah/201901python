Django数据库ORM操作


# ORM概念
对象关系映射（Object Relational Mapping，简称ORM）模式是一种为了解决面向对象与关系数据库存在的互不匹配的现象的技术。

简单的说，ORM是通过使用描述对象和数据库之间映射的元数据，将程序中的对象自动持久化到关系数据库中。

ORM在业务逻辑层和数据库层之间充当了桥梁的作用。



# ORM由来
让我们从O/R开始。字母O起源于"对象"(Object),而R则来自于"关系"(Relational)。

几乎所有的软件开发过程中都会涉及到对象和关系数据库。在用户层面和业务逻辑层面，我们是面向对象的。当对象的信息发生变化的时候，我们就需要把对象的信息保存在关系数据库中。

按照之前的方式来进行开发就会出现程序员会在自己的业务逻辑代码中夹杂很多SQL语句用来增加、读取、修改、删除相关数据，而这些代码通常都是重复的。



# ORM的优势
ORM解决的主要问题是对象和关系的映射。它通常把一个类和一个表一一对应，类的每个实例对应表中的一条记录，类的每个属性对应表中的每个字段。 

ORM提供了对数据库的映射，不用直接编写SQL代码，只需像操作对象一样从数据库操作数据。

让软件开发人员专注于业务逻辑的处理，提高了开发效率。



# ORM的劣势
ORM的缺点是会在一定程度上牺牲程序的执行效率。

ORM用多了SQL语句就不会写了，关系数据库相关技能退化...




# ORM总结
ORM只是一种工具，工具确实能解决一些重复，简单的劳动。这是不可否认的。

但我们不能指望某个工具能一劳永逸地解决所有问题，一些特殊问题还是需要特殊处理的。

但是在整个软件开发过程中需要特殊处理的情况应该都是很少的，否则所谓的工具也就失去了它存在的意义。




# ORM常用字段

```
AutoField:
	int自增列，必须填入参数 primary_key=True。当model中如果没有自增列，则自动会创建一个列名为id的列。

IntegerField:
	一个整数类型,范围在 -2147483648 to 2147483647

CharField:
	字符类型，必须提供max_length参数， max_length表示字符长度。

DateField:
	日期字段，日期格式  YYYY-MM-DD，相当于Python中的datetime.date()实例。

DateTimeField:
	日期时间字段，格式 YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]，相当于Python中的datetime.datetime()实例。


```

# ORM常用字段参数

```
null:
	用于表示某个字段可以为空。

unique:
	如果设置为unique=True 则该字段在此表中必须是唯一的 。

db_index:
	如果db_index=True 则代表着为此字段设置数据库索引。

default:
	为该字段设置默认值。

```



# 时间字段独有的字段参数
```
auto_now_add:
	配置auto_now_add=True，创建数据记录的时候会把当前时间添加到数据库;

auto_now:
	配置上auto_now=True，每次更新数据记录的时候会更新该字段。

```